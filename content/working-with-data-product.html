

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Choosing and downloading weather and climate data products</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/working-with-data-product';</script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Hands-on exercise, step 1: preparing the weather data" href="example-step1.html" />
    <link rel="prev" title="Working with gridded data" href="gridded-data.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="getting-started.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/climate_estimate_logo.png" class="logo__image only-light" alt=" - Home"/>
    <script>document.write(`<img src="../_static/climate_estimate_logo.png" class="logo__image only-dark" alt=" - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="getting-started.html">
                    Introduction to the Tutorial
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Weather and climate data</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="weather-and-climate-data.html">Introduction to weather and climate data</a></li>
<li class="toctree-l1"><a class="reference internal" href="netcdfs-and-basic-coding.html">Weather and climate data basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="gridded-data.html">Working with gridded data</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Choosing and downloading weather and climate data products</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-step1.html">Hands-on exercise, step 1: preparing the weather data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Developing a reduced-form specification</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="reduced-form-specification.html">Developing a reduced-form specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="functional-forms.html">Functional forms: pros, cons, and methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-step2.html">Hands-on exercise, step 2: preparing the demographic data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Geographical unit data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="geographical-unit-data.html">Generating geographical unit data</a></li>
<li class="toctree-l1"><a class="reference internal" href="working-with-shapefiles.html">Constructing weather averages within spatial units</a></li>
<li class="toctree-l1"><a class="reference internal" href="weighting-schemes.html">Weighting schemes</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-step3.html">Hands-on exercise, step 3: aggregating the data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Bringing it all together</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="regression-pointers.html">Some pointers when performing regressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="example-step4.html">Hands-on exercise, step 4: regression results</a></li>
<li class="toctree-l1"><a class="reference internal" href="suggestions.html">Suggestions for work organization</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributors</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="contributors.html">Contributors</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/atrisovic/weather-panel.github.io" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/atrisovic/weather-panel.github.io/edit/master/tutorial-content/content/working-with-data-product.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/atrisovic/weather-panel.github.io/issues/new?title=Issue%20on%20page%20%2Fcontent/working-with-data-product.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/content/working-with-data-product.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Choosing and downloading weather and climate data products</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started-with-an-observational-data-product-best-and-chirps">Getting started with an observational data product: BEST and CHIRPS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started-with-a-reanalysis-data-product-era-5">Getting started with a reanalysis data product: ERA-5</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#thinking-ahead-to-climate-projections">Thinking ahead to climate projections</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-quick-summarizing-note">A quick summarizing note</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="choosing-and-downloading-weather-and-climate-data-products">
<span id="content-working-with-data"></span><h1>Choosing and downloading weather and climate data products<a class="headerlink" href="#choosing-and-downloading-weather-and-climate-data-products" title="Permalink to this heading">#</a></h1>
<p>The following are incredibly useful resources to keep in mind while working with weather data:</p>
<dl class="simple myst">
<dt>üìö  <a class="reference external" href="https://climatedataguide.ucar.edu">UCAR Climate Data Guide</a></dt><dd><p>an encyclopedia for weather and climate data products with expert guidance on strengths and weaknesses for most commonly-used datasets</p>
</dd>
<dt>üìö  <a class="reference external" href="https://reanalyses.org">Reanalysis.org</a></dt><dd><p>a forum and wiki for makers and users of reanalyses with a focus on evaluating data products and comparing them with observational data</p>
</dd>
<dt>üìö  <a class="reference external" href="https://psl.noaa.gov/data/atmoswrit/map/datasets/">Reanalysis and Observational Datasets and Variables</a></dt><dd><p>a ‚Äúwho‚Äôs who‚Äù of historical weather products with basic facts about each</p>
</dd>
</dl>
<p>These resources will help you determine which data product is right for you. They will also help you better interpret results from existing studies. (For example, the NCEP2 reanalysis data product, which was commonly used in economics and policy studies, has known issues including larger biases in the Southern Hemisphere).</p>
<p>The following section shows several examples of choosing and downloading weather data given a region and variable of interest. Though there are many more products than the three introduced here, each with their own download procedures and quirks, these examples show a few common setups that you may encounter (CHIRPS: ftp directory; BEST: website browser; ERA5: data storage system).</p>
<p>Generally, it‚Äôs good practice to first research which data products are appropriate for your variable and area of interest. Questions you should be thinking of include:</p>
<ul class="simple">
<li><p>does the data product have the variable I need?</p></li>
<li><p>are the data available at the resolution I need?</p></li>
<li><p>are biases reasonable for the variable and region of interest?</p></li>
</ul>
<p>The answers to the first two questions above are easily found on the website of each dataset. The third question is more complex - the <a class="reference external" href="https://climatedataguide.ucar.edu">UCAR Climate Data Guide</a> introduced above is a good first place to look. A <a class="reference external" href="https://scholar.google.com/">Google Scholar</a> search of the form <code class="docutils literal notranslate"><span class="pre">[data</span> <span class="pre">product</span> <span class="pre">name]</span> <span class="pre">validation</span> <span class="pre">OR</span> <span class="pre">evaluation</span> <span class="pre">OR</span> <span class="pre">bias</span> <span class="pre">OR</span> <span class="pre">uncertainty</span></code> may be useful as well.</p>
<section id="getting-started-with-an-observational-data-product-best-and-chirps">
<span id="content-best-and-chirps"></span><h2>Getting started with an observational data product: BEST and CHIRPS<a class="headerlink" href="#getting-started-with-an-observational-data-product-best-and-chirps" title="Permalink to this heading">#</a></h2>
<p>Say you‚Äôre looking at agriculture in Ethiopia. You would like both temperature and precipitation data (remember the <a class="reference internal" href="gridded-data.html#content-warning-on-hydrological"><span class="std std-ref">warning on hydrological variables</span></a>), and would like to use observational datasets. You consider BEST for temperature due to their daily output and CHIRPS, a hybrid station-satellite data product, for precipitation because you found <a class="reference external" href="https://rmets.onlinelibrary.wiley.com/doi/full/10.1002/qj.3244">literature</a> specifically examining its biases in your region of interest.</p>
<table class="table">
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>CHIRPS</p></th>
<th class="head"><p>BEST</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>1. Understand the Data Product</em></p></td>
<td><p>CHIRPS is unfortunately not covered on the UCAR Climate Data Guide. <em>However</em>, you find several articles specifically validating it in Ethiopia (e.g., <a class="reference external" href="https://rmets.onlinelibrary.wiley.com/doi/full/10.1002/qj.3244">Dinku et al. 2018</a> or <a class="reference external" href="https://eprints.soton.ac.uk/435188/">Gebrechorkos et al. 2018</a>). You see that satellite data products are more biased South of the Rift Valley than North. You also see that CHIRPS tends to overestimate rainfall. You consider how these biases may affect your results.</p></td>
<td><p>BEST <em>is</em> <a class="reference external" href="https://climatedataguide.ucar.edu/climate-data/global-surface-temperatures-best-berkeley-earth-surface-temperatures">covered in the Climate Data Guide</a>. You see that it is able to provide high-resolution data because it includes incomplete and partial station records that other global data products may throw out. However, you also see that the data is highly smoothed, meaning that it will likely be more biased in areas with large heterogeneity in temperature - for example in the mountainous highlands of Ethiopia. You resolve to use different sources to check for robustness.</p></td>
</tr>
<tr class="row-odd"><td><p><em>2. Prepare to Download the Data</em></p></td>
<td><p>CHIRPS data is stored in a <a class="reference external" href="https://data.chc.ucsb.edu/products/CHIRPS-2.0/">publicly accessible directory</a>. You navigate to the <code class="docutils literal notranslate"><span class="pre">africa_daily/bils/</span></code> directory, and choose between 0.5 degree resolution and 2.5 degree resolution. However, you realize that you may have to write a shell script to download this data, to avoid clicking every file separately (using <code class="docutils literal notranslate"><span class="pre">ftplib</span></code> in Python and similar packages is also an option).</p></td>
<td><p>Click on ‚ÄòGet Data (external)‚Äô on the Climate Data Guide website, taking you to Berkley Earth‚Äôs data overview page. You navigate down to the section on ‚ÄòGridded Data‚Äô. You‚Äôll have to click on every decade separately, but without further ado, clean NetCDF files are being downloaded to your machine.</p></td>
</tr>
<tr class="row-even"><td><p><em>3. Accessing the Data</em></p></td>
<td><p>Unfortunately, the data is not in <code class="docutils literal notranslate"><span class="pre">.nc</span></code> format, but in <code class="docutils literal notranslate"><span class="pre">bil</span></code> format. This is a raster data format, and it can be opened in the featured languages. For example, <code class="docutils literal notranslate"><span class="pre">xarray</span></code> has <code class="docutils literal notranslate"><span class="pre">xr.open_rasterio()</span></code>, MATLAB has <code class="docutils literal notranslate"><span class="pre">multibandread</span></code>, and <code class="docutils literal notranslate"><span class="pre">R</span></code> has the <code class="docutils literal notranslate"><span class="pre">raster</span></code> package. We suggest you convert the <code class="docutils literal notranslate"><span class="pre">bil</span></code> files into NetCDF, for consistency and ease of access (using <code class="docutils literal notranslate"><span class="pre">xr.Dataset.to_netcdf()</span></code>, for example).</p></td>
<td><p>The filename, as is typical for observational datasets, is in its own format - so you might want to rename them into CMIP format just for ease of reading. By reading the NetCDF header, you note that the grid variables are stored as <code class="docutils literal notranslate"><span class="pre">latitude</span></code> and <code class="docutils literal notranslate"><span class="pre">longitude</span></code> and the temperature as <code class="docutils literal notranslate"><span class="pre">temperature</span></code>, and you‚Äôre set to go!</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most weather products will require some bureaucracy (creating accounts, signing data agreements, etc.) to download data, and most have their own quirks about how they want data to be downloaded. CHIRPS and BEST do not require bureaucracy, but CHIRPS will require some scripting to download.</p>
</div>
<p>These datasets are stored in different geographical grids and will need to be regridded to a common grid, using tools like <code class="docutils literal notranslate"><span class="pre">xesmf</span></code> in Python. See also <a class="reference internal" href="weighting-schemes.html"><span class="doc std std-doc">weighting schemes</span></a>.</p>
</section>
<section id="getting-started-with-a-reanalysis-data-product-era-5">
<span id="content-working-with-era5"></span><h2>Getting started with a reanalysis data product: ERA-5<a class="headerlink" href="#getting-started-with-a-reanalysis-data-product-era-5" title="Permalink to this heading">#</a></h2>
<p>Say you‚Äôre studying heat waves in the Sahel. Weather station data is low, so you need a gridded data product. You consider ERA5, the most advanced modern reanalysis data product as of 2019, recently released by the <a class="reference external" href="https://www.ecmwf.int/">European Centre for Medium-Range Weather Forecasting (ECMWF)</a> (which incidentally also produces the world‚Äôs most respected hurricane forecast model).</p>
<table class="table">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>ERA-5</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><em>1. Understand the Data Product</em></p></td>
<td><ol class="arabic simple">
<li><p>You first consult the <a class="reference external" href="https://climatedataguide.ucar.edu/climate-data/era5-atmospheric-reanalysis">ERA5 page</a> on UCAR‚Äôs Climate Data Guide, and ERA5‚Äôs <a class="reference external" href="https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-single-levels?tab=overview">description page</a> on ECMWF‚Äôs website. These tell you ERA5 has a resolution of about 31 km horizontally (this is about as high as it gets in this generation of data products). It also allows hourly data (this too is uncommon; most only provide daily, or maybe 3-hourly). However, observe caution here: just because the data is available at this resolution does not mean it is reliable at that resolution, and you will likely need to spend time aggregating the data across time to develop your final dataset.</p></li>
<li><p>You see that it even gives you an estimate of the internal model uncertainty by rerunning the same analysis 10 times (10 ‚Äúensemble members‚Äù), though in ‚Äúweaknesses‚Äù you note that the uncertainty may be underestimated.</p></li>
<li><p>You notice that ERA5 extends back to 1979 for now (1979 is a common cutoff point due to the start of satellite observations in 1978).</p></li>
<li><p>You notice that most of the weaknesses described (temperature in the tropopause, upper stratosphere global average temperature, etc.) don‚Äôt seem to affect your region or variables of interest. However, you double-check whether ERA5 is appropriate by searching <a class="reference external" href="https://scholar.google.com/">Google Scholar</a> for any relevant evaluation studies (sample search: <code class="docutils literal notranslate"><span class="pre">ERA5</span> <span class="pre">Sahel</span> <span class="pre">temperature</span> <span class="pre">validation</span> <span class="pre">OR</span> <span class="pre">evaluation</span> <span class="pre">OR</span> <span class="pre">bias</span> <span class="pre">OR</span> <span class="pre">uncertainty</span></code>)</p></li>
</ol>
</td>
</tr>
<tr class="row-odd"><td><p><em>2. Prepare to Download the Data</em></p></td>
<td><ol class="arabic simple">
<li><p>You click on ‚ÄòGet Data (external)‚Äô in the Data Guide, or look on ERA5‚Äôs description page, to find a <a class="reference external" href="https://cds.climate.copernicus.eu/#!/search?text=ERA5&amp;type=dataset">link</a> to the Copernicus climate data store. There, you realize that you‚Äôll need to sign up for an account (modern data products from larger institutions such as the ECMWF will thankfully have an automated system for this; some smaller products may require you to wait until someone manually approves your account), which just asks you to sign a data use agreement (remember to correctly cite data sources!).</p></li>
<li><p>The download page also gives you some documentation for the data product, including variable names - you see ‚Äú2m air temperature‚Äù in Kelvin is the variable you need.</p></li>
<li><p>You click on the data you want, which years you want it for, etc., and prepare to check out. Here, there are two options: GRIB, and NetCDF (experimental). You click NetCDF, because after this guide, you feel comfortable working with it.</p></li>
<li><p>Clicking download completes the process.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>GRIB is another meteorological data format - it‚Äôs less common and less flexible than NetCDF but slightly more efficient in storage. GRIB files can be converted easily to NetCDF files through <a class="reference external" href="https://confluence.ecmwf.int/display/OIFS/How+to+convert+GRIB+to+NetCDF">command-line tools</a> such as <a class="reference external" href="https://code.zmaw.de/projects/cdo">cdo</a>.</p>
</div>
</td>
</tr>
<tr class="row-even"><td><p><em>3. Accessing the Data</em></p></td>
<td><ol class="arabic simple">
<li><p>You notice that the files have odd automatically-generated filenames. In this case, you may want to rename the file to a format that‚Äôs more meaningful (for example, following a CMIP convention). If there are multiple files, write a script to do this for you.</p></li>
<li><p>The information in a NetCDF header, which carries the timespan and variables of each file, is always extractable. Use <code class="docutils literal notranslate"><span class="pre">ncinfo</span></code> in Matlab or <code class="docutils literal notranslate"><span class="pre">nc_open</span></code> in R to extract this information. If you‚Äôre using Python‚Äôs <code class="docutils literal notranslate"><span class="pre">xarray</span></code>, the function <code class="docutils literal notranslate"><span class="pre">xr.open_mfdataset()</span></code> will let you list multiple files, and it should correctly and automatically sort them into a single dataset.</p></li>
<li><p>Reading the NetCDF header shows that your variable is named <code class="docutils literal notranslate"><span class="pre">t2m</span></code> (stored as a <code class="docutils literal notranslate"><span class="pre">longitude</span> <span class="pre">x</span> <span class="pre">latitude</span> <span class="pre">x</span> <span class="pre">time</span></code> grid), the grid variables are called <code class="docutils literal notranslate"><span class="pre">latitude</span></code>  and <code class="docutils literal notranslate"><span class="pre">longitude</span></code>, and the time variable is called <code class="docutils literal notranslate"><span class="pre">time</span></code>. You can now access the data!</p></li>
</ol>
</td>
</tr>
</tbody>
</table>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Many datasets, especially those from smaller institutions, will not give up their secrets easily. Be prepared to have to deal with <code class="docutils literal notranslate"><span class="pre">wget</span></code> scripts, <code class="docutils literal notranslate"><span class="pre">jblob</span></code> scripts, writing <code class="docutils literal notranslate"><span class="pre">ftp</span></code> scripts, and so forth, with well-meaning but poorly-written accompanying documentation. In some of these cases, it might be fastest to call up your best climate researcher friend, who may be able to just share their scripts with you.</p>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Climate and weather data can be massive. For example, the full, hourly, global record of a set of 9 commonly-used near-surface variables in ERA5 (including temperature and preciptiation) comes out to roughly 7 TB of disk space in total. Consequently, data products tend to be saved in smaller chunks, or allow for subsetting before downloading. Depending on the scale of your analysis, you will likely need additional storage beyond your personal machine, on external servers, for example. More recently, some datasets have also been made available on cloud servers such as <a class="reference external" href="https://pangeo-forge.org/catalog">pangeo</a> or <a class="reference external" href="https://www.ecmwf.int/en/newsletter/162/news/era5-reanalysis-data-available-earth-engine">Google Earth Engine</a>.</p>
</div>
</section>
<section id="thinking-ahead-to-climate-projections">
<h2>Thinking ahead to climate projections<a class="headerlink" href="#thinking-ahead-to-climate-projections" title="Permalink to this heading">#</a></h2>
<p>Research linking social outcomes to weather variations often aim to project results into the future to estimate the impact of climate change on their variable of interest. We have chosen (at least for now) not to expand this guide to include information on climate projection because of its immense complexity. Oftentimes a more sophisticated understanding of how models work and their uncertainties is needed to avoid underestimating propagated uncertainties in your final estimates. Even more so than with weather data products, there is no <em>right</em> or <em>correct</em> climate model, or group of models to use (see e.g., <a class="reference external" href="https://doi.org/10.1007/s10584-010-9800-2">Knutti 2010</a> or <a class="reference external" href="https://doi.org/10.1002/2017GL073370">Collins 2017</a>. Emissions scenarios, the response of the models to emissions scenarios, intermodel variability, and <em>intra</em>-model variability all add to the uncertainty in your projection, and their relative strength may depend on the timescale and aims of your study.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>To get started thinking about incorporating changes in climate into your analysis, we also recommend: <a class="reference external" href="https://onlinelibrary.wiley.com/doi/abs/10.1002/wcc.579">On the use and misuse of climate change projections in international development, by Nissan et al. (2019)</a> and <a class="reference external" href="https://doi.org/10.1093/reep/ret016">Using Weather Data and Climate Model Output in Economic Analyses of Climate Change by Auffhammer et al. (2013)</a></p>
</div>
<p>However, if you plan to project results into the future, you can start thinking about its logistics now. Climate data comes from imperfect models whose raw output generally has to be ‚Äúbias-corrected‚Äù before being used in econometric or policy research contexts. Bias-correction involves using information from a weather dataset to inform the output of a climate model, either by applying model changes to the weather data (so-called ‚Äúdelta-method‚Äù projection) or by adjusting the model output by applying a historical difference between the model and weather data to the future model output. We won‚Äôt go into details about these methods (like everything in this field, they have their strengths and weaknesses), but you should generally use data that has been bias-corrected to the same weather data set you are using to inform your econometric model. Oftentimes this bias-correction is still conducted by the end user themselves, but some pre-bias-corrected climate projections exist. For example, NASA‚Äôs <a class="reference external" href="https://doi.org/10.7917/OFSG3345">NEX-GDDP</a> dataset is bias-corrected to the <a class="reference external" href="https://doi.org/10.5065/JV89-AH11">Global Meteorological Forcing Dataset (GMFD) for Land Surface Modeling</a> historical dataset.</p>
</section>
<section id="a-quick-summarizing-note">
<h2>A quick summarizing note<a class="headerlink" href="#a-quick-summarizing-note" title="Permalink to this heading">#</a></h2>
<p>This process may seem overwhelming, especially given the large variety of data products that exist, and the sometimes rather opaque processes for figuring out what works best.</p>
<p>If a regional observational dataset exists for the region and variables you wish to examine, you should start off with them. Alternatively, you may use a well-understood global observational dataset. Don‚Äôt use a dataset or a data assimilation methodology just because previous work (even big-name papers) have used them. There are enough examples in the literature of problematic uses of weather and climate data (for examples of discussions about these issues, see <a class="reference external" href="https://www.aeaweb.org/articles?id=10.1257/aer.102.7.3749">Fisher et al. 2012</a> and <a class="reference external" href="https://www.mitpressjournals.org/doi/abs/10.1162/REST_a_00478">Burke et al. 2015</a>).</p>
<p>Furthermore, check your results with multiple datasets from the latest generation! Consider performing your analysis with a purely station-based dataset and one that includes satellite data; or compare results to those from a reanalysis dataset if you are worried about statistical interpolation in your region of interest. This may not make a huge difference for more stable variables in areas with high station coverage (e.g., temperature in North America), but could be a useful robustness check for more problematic ones (e.g., precipitation). If the choice of ‚Äòhistorical‚Äô dataset changes your results, think about how their biases may interact with your analysis to figure out what‚Äôs causing the discrepancy.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="gridded-data.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Working with gridded data</p>
      </div>
    </a>
    <a class="right-next"
       href="example-step1.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Hands-on exercise, step 1: preparing the weather data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started-with-an-observational-data-product-best-and-chirps">Getting started with an observational data product: BEST and CHIRPS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started-with-a-reanalysis-data-product-era-5">Getting started with a reanalysis data product: ERA-5</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#thinking-ahead-to-climate-projections">Thinking ahead to climate projections</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-quick-summarizing-note">A quick summarizing note</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      ¬© Copyright 2020.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>